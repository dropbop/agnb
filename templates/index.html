{% extends "base.html" %}

{% block body %}
<header>
    <div class="header-content">
        <h1 class="site-title">AllGasNoBrakes</h1>
        <nav>
            <a href="#gallery-anchor">Portfolio</a>
            <a href="#contact">Contact</a>
        </nav>
    </div>
</header>

<main>
    <!-- Anchor used by nav (works for either experience) -->
    <div id="gallery-anchor"></div>

    <!-- DESKTOP EXPERIENCE (carousel of trios). JS will populate and mark as ready. -->
    <section id="desktop-gallery" class="carousel-container">
        <div class="carousel" aria-live="polite"></div>

        <div class="controls">
            <button class="arrow-button" aria-label="Previous" id="prevButton">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>
            <button class="arrow-button" aria-label="Next" id="nextButton">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>
    </section>

    <!-- MOBILE EXPERIENCE (server-rendered so phones see images even without JS). -->
    <section id="mobile-gallery" class="mobile-gallery">
        <div class="mobile-list" aria-live="polite">
            {% for f in mobile_photos %}
              <a class="mobile-card"
                 href="{{ url_for('view_image', variant='mobile', filename=f) }}">
                <img
                  src="{{ url_for('get_photo', variant='mobile', filename=f) }}"
                  alt="Photo {{ loop.index }}"
                  loading="{{ 'eager' if loop.index0 < 2 else 'lazy' }}"
                  decoding="async">
              </a>
            {% endfor %}
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="contact-content">
            <div class="contact-info">
                <p class="contact-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="5" width="18" height="14" rx="2"></rect>
                        <path d="m3 7 9 6 9-6"></path>
                    </svg>
                    <a href="mailto:AllGasNoBrakes@tuta.com" class="contact-link">
                        AllGasNoBrakes@tuta.com
                    </a>
                </p>
                <p class="contact-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round">
                        <rect width="18" height="18" x="3" y="3" rx="4.5"></rect>
                        <circle cx="12" cy="12" r="3.5"></circle>
                        <circle cx="16.5" cy="7.5" r=".5" fill="currentColor" stroke="none"></circle>
                    </svg>
                    <a href="https://instagram.com/AllGasNoBrakesMedia"
                       target="_blank"
                       rel="noopener noreferrer"
                       class="contact-link">
                        AllGasNoBrakesMedia
                    </a>
                </p>
            </div>

            <!-- Contact Form -->
            <div class="contact-form-container">
                <h2 class="form-title">Get In Touch</h2>
                <form id="contactForm" class="contact-form">
                    <input type="hidden" name="access_key" value="{{ web3forms_key|default('YOUR_ACCESS_KEY_HERE') }}">

                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" id="name" name="name" placeholder="Your Name" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" placeholder="Your Email" required>
                    </div>

                    <div class="form-group">
                        <label for="message">Message</label>
                        <textarea id="message" name="message" placeholder="Tell us about your project" rows="4" required></textarea>
                    </div>

                    <input type="checkbox" name="botcheck" style="display:none;">

                    <button type="submit" class="submit-button">
                        <span>Send Message</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m5 12 14 0"></path>
                            <path d="m12 5 7 7-7 7"></path>
                        </svg>
                    </button>

                    <div id="formResult" class="form-result"></div>
                </form>
            </div>
        </div>
    </section>
</main>
{% endblock %}
