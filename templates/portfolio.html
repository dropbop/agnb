<!-- templates/portfolio.html -->
{% extends "base.html" %}

{% block title %}AllGasNoBrakes â€“ Portfolio{% endblock %}

{% block head %}
<style>
  .portfolio-header {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: var(--mobile-header-height);
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 16px;
    background: rgba(10,10,10,0.8);
    backdrop-filter: blur(6px);
    z-index: 100;
  }
  .portfolio-header .site-title { font-size: 1.25rem; }
  .portfolio-header nav { position: static; transform: none; display: flex; gap: 12px; }
  .portfolio-main { padding-top: calc(var(--mobile-header-height) + 12px); }
  .masonry { column-gap: 16px; padding: 8px 16px 48px; column-count: 1; }
  @media (min-width: 700px) { .masonry { column-count: 2; column-gap: 20px; padding: 16px 24px 60px; } }
  @media (min-width: 1100px) { .masonry { column-count: 3; column-gap: 24px; padding: 24px 40px 80px; } }
  .masonry-item { break-inside: avoid; margin-bottom: 16px; display: block; }
  .masonry-item img { width: 100%; height: auto; display: block; }
</style>
{% endblock %}

{% block body %}
<header class="portfolio-header">
  <h1 class="site-title">AllGasNoBrakes</h1>
  <nav>
    <a href="{{ url_for('index') }}">Home</a>
    <a href="{{ url_for('portfolio') }}">Portfolio</a>
  </nav>
</header>

<main class="portfolio-main">
  <section class="masonry">
    {% for filename in photos %}
      <a class="masonry-item" href="{{ url_for('view_image', subdir=subdir, filename=filename) }}">
        <img
          src="{{ url_for('get_media', subdir=subdir, filename=filename) }}"
          alt="Portfolio photo {{ loop.index }}"
          loading="lazy"
          onerror="this.onerror=null;this.src='{{ url_for('static', filename=subdir ~ '/' ~ filename) }}';">
      </a>
    {% endfor %}
  </section>
</main>
{% endblock %}
